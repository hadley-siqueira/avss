<div class="container">
    <div class="form-wrapper">
        <section class="container__section" id="circuits" data-controller="debounced">
            <h1>
                Nova estação
            </h1>
            <%= form_with model: @station, class: "container__form", multipart: true, data: {debounced_target: "form"} do |form| %>
                <div class="field">
                    <%= form.label :title, "Título", class:"field__label" %>
                    <%= form.text_field :title, 
                        class:"field__input",
                        placeholder: "Título da estação",
						data: {action: "input->debounced#submitForm"},
						value: @station.title
                    %>
                </div>
                <div class="field">
                    <%= form.label :context, "Contextualização", class:"field__label" %>
                    <%= form.text_area :context, 
                        class:"field__input",
                        placeholder:"Descreva um contexto para que o aluno se situe para realização da Estação. Texto que será apresentado aos alunos no ato de selecionar a Estação!",
                        rows:"15",
						data: {action: "input->debounced#submitForm"},
						value: @station.context
                    %>
                </div>
				<div class="field">
                    <%= form.label :procedure, "Procedimento", class:"field__label" %>
                    <%= form.text_area :procedure, 
                        class:"field__input",
                        placeholder:"Descreva o procedimento esperado na realização da Estação",
                        rows:"15",
						data: {action: "input->debounced#submitForm"},
						value: @station.procedure
                    %>
                </div>
				<div class="field">
                    <%= form.label :evaluation, "Avaliação", class:"field__label" %>
                    <%= form.text_area :evaluation, 
                        class:"field__input",
                        placeholder:"Entregas esperadas",
                        rows:"10",
						data: {action: "input->debounced#submitForm"},
						value: @station.evaluation
                    %>
                </div>
				<div class="fields--inline">
					<div class="field">
						<%= form.label :time, "Tempo (minutos)", class:"field__label" %>
						<%= form.number_field  :time, 
							class:"field__input",
							placeholder: "Tempo da situação problema",
							data: {action: "input->debounced#submitForm"},
							value: @station.time
						%>
                	</div>
					<div class="field">
						<%= form.label :score, "Pontuação", class:"field__label" %>
						<%= form.number_field  :score, 
							class:"field__input",
							placeholder: "Pontuação da situação problema",
							data: {action: "input->debounced#submitForm"},
							value: @station.score
						%>
                	</div>
				</div>
				<div class="fields--inline">
					<fieldset class="difficulty-container">
						<legend>Dificuldade</legend>
						<div id="station_difficulty">
							<%= render "difficulty_rating", station: @station %>
						</div>
					</fieldset>
					<fieldset class="radio-inputs">
						<legend class="field__label">Receber feedback</legend>
						<div class="radio-field">
							<%= form.radio_button :feedback, "1", checked: @station.feedback, data: {action: "click->debounced#submitForm"} %>
							<%= form.label :feedback, "Sim", class:"field__label" %>
						</div>
						<div class="radio-field">
							<%= form.radio_button :feedback, "0", checked: !@station.feedback, data: {action: "click->debounced#submitForm"} %>
							<%= form.label :feedback, "Não", class:"field__label" %>
						</div>
					</fieldset>
				</div>
				<fieldset class="attachments-container">
					<legend class="field__label">Anexos</legend>
					<ul class="fields-list" id="attachments-fields">
						<li>
							<%= form.file_field :attachments, multiple: true, class: "field__input--file", data: {action: "change->debounced#submitForm"} %>
							<%= form.label :attachments, "Escolha um arquivo", class:"field__label--file" %>
						</li>
					</ul>
					<button 
						type="button" 
						class="attachments__btn-add" 
						data-target="#attachments-fields"
						data-controller="add-field"
						data-action="click->add-field#add_field"
					>
						<span class="material-symbols-outlined">
							add
						</span>
					</button>
				</fieldset>
            <% end %>
        </section>
        <section class="container__section" id="questions">
			<% @station.attachments.each do |a| %>
				<%= a.filename %>
				<%= link_to a.filename, a %><br>
			<% end %>
            <h2 class="container__section__title">Perguntas</h2>
            <div class="buttons-container">
                <button class="button button--blue">Nova pergunta</button>
                <button class="button button--outlined-blue">Buscar pergunta</button>
            </div>
            <ul class="stations-list">
                <li>
                    <%= render "stations/card_station" %>
                </li>
            </ul>
        </section>
    </div>
</div>